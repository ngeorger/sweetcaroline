!function(){"use strict";window.cakeciousProWooCommerce={initCartFloatingCheckoutButton:function(){var e=document.querySelector(".woocommerce-cart .cakecious-cart-mobile-sticky-checkout");if(e){var t=e.querySelector(".cakecious-cart-mobile-sticky-checkout-inner"),o=(t.querySelector(".checkout-button"),document.getElementById("page"),!1),i=function(){o||(o=!0,window.pageYOffset+window.innerHeight<cakeciousHelper.getOffset(e).top?t.classList.add("cakecious-show"):t.classList.remove("cakecious-show"),o=!1)};window.addEventListener("resize",i,!1),window.addEventListener("scroll",i,!1),window.addEventListener("load",i,!1),i()}},initQuickView:function(){var e=document.querySelector("#product-quick-view");if(e){var t=e.querySelector(".cakecious-product-quick-view-content"),o=function(o){var i=o.target.closest("ul.products li.product .cakecious-product-quick-view-button");if(i){var r=new XMLHttpRequest,a={action:"cakecious_woocommerce_render_product_quick_view",product_id:i.getAttribute("data-product_id")},n=Object.keys(a).map((function(e){return e+"="+a[e]})).join("&");r.open("GET",cakeciousProConfig.ajaxURL+"?"+n,!0),r.addEventListener("load",(function(){if(r.status>=200&&r.status<400){t.innerHTML=r.responseText;var o=t.querySelector(".woocommerce-product-gallery"),i=Array.prototype.slice.call(o.querySelectorAll(".woocommerce-product-gallery__image > a"));i.forEach((function(e){e.outerHTML=e.innerHTML})),1<i.length&&jQuery.fn.flexslider?jQuery(o).flexslider({selector:".woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image",start:function(t){o.style.opacity=1,e.classList.add("cakecious-loaded")},rtl:!1,animation:"slide",smoothHeight:!1,directionNav:!1,controlNav:!0,slideshow:!1,animationSpeed:500,animationLoop:!1,allowOneSlide:!1}):(o.style.opacity=1,e.classList.add("cakecious-loaded")),cakeciousProWooCommerce.initAJAXAddToCart(e),jQuery(".variations_form").each((function(){jQuery(this).wc_variation_form()}))}})),r.send()}};document.addEventListener("click",o,!1),document.addEventListener("touchend",o,!1);var i=function(o){o.target.closest(".cakecious-product-quick-view .cakecious-popup-close")&&setTimeout((function(){t.innerHTML="",e.classList.remove("cakecious-loaded")}),500)};document.addEventListener("click",i,!1),document.addEventListener("touchend",i,!1);document.addEventListener("touchend",(function(e){var t=e.target.closest(".cakecious-product-thumbnail a");if(t){var o=t.closest(".cakecious-product-thumbnail-with-quick-view");if(o){var i=o.querySelector(".cakecious-product-quick-view-button");i&&t!==document.activeElement&&i!==document.activeElement&&(document.activeElement.blur(),i.focus(),e.preventDefault())}}}),!1)}},initAJAXAddToCart:function(e){"undefined"!=typeof wc_add_to_cart_params&&(e=void 0!==e?e:document,Array.prototype.slice.call(e.querySelectorAll(".cakecious-product-add-to-cart.cakecious-ajax-add-to-cart-form form")).forEach((function(e){if("get"!==e.method.toLowerCase()){var t=e.querySelector(".single_add_to_cart_button");t&&e.addEventListener("submit",(function(o){o.preventDefault(),t.classList.remove("added"),t.classList.add("loading");for(var i={},r=0;r<e.elements.length;r++){var a=e.elements[r];if(a.name&&!a.disabled)if("select-multiple"===a.type)for(var n=0;n<a.options.length;n++)a.options[n].selected&&(i[a.name]=a.options[n].value);else"checkbox"===a.type||"radio"===a.type?a.checked&&(i[a.name]=a.value):i[a.name]=a.value}void 0!==i.variation_id?(i.product_id=i.variation_id,delete i.variation_id,delete i["add-to-cart"]):void 0!==i["add-to-cart"]&&void 0===i.product_id&&(i.product_id=i["add-to-cart"],delete i["add-to-cart"]);var d=Object.keys(i).map((function(e){return e+"="+i[e]})).join("&");jQuery(document.body).trigger("adding_to_cart",[t,d]);var c=new XMLHttpRequest;c.open("POST",wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.addEventListener("load",(function(){if(t.classList.add("added"),t.classList.remove("loading"),c.status>=200&&c.status<400){var e=JSON.parse(c.responseText);if(e.error&&e.product_url)return void(window.location=e.product_url);if("yes"===wc_add_to_cart_params.cart_redirect_after_add&&1!=wc_add_to_cart_params.is_cart)return void(window.location=wc_add_to_cart_params.cart_url);jQuery(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,jQuery(t)])}}),!1),c.send(encodeURI(d))}),!1)}})))},initAJAXAddedToCartHighlight:function(){document.body.classList.contains("cakecious-ajax-added-to-cart-open-header-cart")&&jQuery(document.body).on("wc_fragments_loaded",(function(){var e=document.querySelector(".cakecious-header-shopping-cart .cakecious-toggle");e&&(document.body.classList.contains("cakecious-has-popup-active")||e.click())}))},initAll:function(){window.cakeciousProWooCommerce.initCartFloatingCheckoutButton(),window.cakeciousProWooCommerce.initQuickView(),window.cakeciousProWooCommerce.initAJAXAddToCart(),window.cakeciousProWooCommerce.initAJAXAddedToCartHighlight()}},document.addEventListener("DOMContentLoaded",window.cakeciousProWooCommerce.initAll,!1)}();