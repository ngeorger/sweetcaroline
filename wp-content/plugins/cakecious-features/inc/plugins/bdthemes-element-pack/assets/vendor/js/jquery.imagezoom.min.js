!function(m,f,e){m.ImageZoom=function(e,o){var p=this;function c(e){var o=parseInt(e);return o=isNaN(o)?0:o}p.$el=m(e),p.$el.data("imagezoom",p),p.init=function(e){p.options=m.extend({},m.ImageZoom.defaults,e),p.$viewer=m('<div class="zm-viewer '+p.options.zoomViewerClass+'"></div>').appendTo("body"),p.$handler=m('<div class="zm-handler'+p.options.zoomHandlerClass+'"></div>').appendTo("body"),p.isBigImageReady=-1,p.$largeImg=null,p.isActive=!1,p.$handlerArea=null,p.isWebkit=/chrome/.test(navigator.userAgent.toLowerCase())||/safari/.test(navigator.userAgent.toLowerCase()),p.evt={x:-1,y:-1},p.options.bigImageSrc=""==p.options.bigImageSrc?p.$el.attr("src"):p.options.bigImageSrc,(new Image).src=p.options.bigImageSrc,p.callIndex=m.ImageZoom._calltimes+1,p.animateTimer=null,m.ImageZoom._calltimes+=1,m(document).bind("mousemove.imagezoom"+p.callIndex,function(e){p.isActive&&p.moveHandler(e.pageX,e.pageY)}),p.$el.bind("mouseover.imagezoom",function(e){p.isActive=!0,p.showViewer(e)})},p.moveHandler=function(e,o){var t=p.$el.offset(),i=p.$el.outerWidth(!1),s=p.$el.outerHeight(!1);if(e>=t.left&&e<=t.left+i&&o>=t.top&&o<=t.top+s){if(t.left=t.left+c(p.$el.css("borderLeftWidth"))+c(p.$el.css("paddingLeft")),t.top=t.top+c(p.$el.css("borderTopWidth"))+c(p.$el.css("paddingTop")),i=p.$el.width(),s=p.$el.height(),e>=t.left&&e<=t.left+i&&o>=t.top&&o<=t.top+s&&(p.evt={x:e,y:o},"follow"==p.options.type&&p.$viewer.css({top:o-p.$viewer.outerHeight(!1)/2,left:e-p.$viewer.outerWidth(!1)/2}),1==p.isBigImageReady)){var a,n,r=o-t.top,l=e-t.left;if("inner"==p.options.type)a=-p.$largeImg.height()*r/s+r,n=-p.$largeImg.width()*l/i+l;else if("standard"==p.options.type){var h=l-p.$handlerArea.width()/2,m=r-p.$handlerArea.height()/2,d=p.$handlerArea.width(),g=p.$handlerArea.height();h<0?h=0:i-d<h&&(h=i-d),m<0?m=0:s-g<m&&(m=s-g),n=-h/p.scale,a=-m/p.scale,p.isWebkit?(p.$handlerArea.css({opacity:.99}),setTimeout(function(){p.$handlerArea.css({top:m,left:h,opacity:1})},0)):p.$handlerArea.css({top:m,left:h})}else"follow"==p.options.type&&(a=-p.$largeImg.height()/s*r+p.options.zoomSize[1]/2,n=-p.$largeImg.width()/i*l+p.options.zoomSize[0]/2,-a>p.$largeImg.height()-p.options.zoomSize[1]?a=-(p.$largeImg.height()-p.options.zoomSize[1]):0<a&&(a=0),-n>p.$largeImg.width()-p.options.zoomSize[0]?n=-(p.$largeImg.width()-p.options.zoomSize[0]):0<n&&(n=0));p.options.smoothMove?(f.clearTimeout(p.animateTimer),p.smoothMove(n,a)):p.$viewer.find("img").css({top:a,left:n})}}else p.isActive=!1,p.$viewer.hide(),p.$handler.hide(),p.options.onHide(p),f.clearTimeout(p.animateTimer),p.animateTimer=null},p.showViewer=function(o){var e=p.$el.offset().top,t=c(p.$el.css("borderTopWidth")),i=c(p.$el.css("paddingTop")),s=p.$el.offset().left;e=e+t+i,s=s+c(p.$el.css("borderLeftWidth"))+c(p.$el.css("paddingLeft"));var a=p.$el.width(),n=p.$el.height();if(p.isBigImageReady<1&&m("div",p.$viewer).remove(),"inner"==p.options.type)p.$viewer.css({top:e,left:s,width:a,height:n}).show();else if("standard"==p.options.type){var r,l,h=""==p.options.alignTo?p.$el:m("#"+p.options.alignTo);"left"==p.options.position?(r=h.offset().left-p.options.zoomSize[0]-p.options.offset[0],l=h.offset().top+p.options.offset[1]):"right"==p.options.position&&(r=h.offset().left+h.width()+p.options.offset[0],l=h.offset().top+p.options.offset[1]),p.$viewer.css({top:l,left:r,width:p.options.zoomSize[0],height:p.options.zoomSize[1]}).show(),p.$handlerArea&&(p.scale=a/p.$largeImg.width(),p.$handlerArea.css({width:p.$viewer.width()*p.scale,height:p.$viewer.height()*p.scale}))}else"follow"==p.options.type&&p.$viewer.css({width:p.options.zoomSize[0],height:p.options.zoomSize[1],top:o.pageY-p.options.zoomSize[1]/2,left:o.pageX-p.options.zoomSize[0]/2}).show();p.$handler.css({top:e,left:s,width:a,height:n}).show(),p.options.onShow(p),-1==p.isBigImageReady&&(p.isBigImageReady=0,fastImg(p.options.bigImageSrc,function(){if(m.trim(m(this).attr("src"))==m.trim(p.options.bigImageSrc)){if(p.$viewer.append('<img src="'+p.$el.attr("src")+'" class="zm-fast" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),p.isBigImageReady=1,p.$largeImg=m('<img src="'+p.options.bigImageSrc+'" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),p.$viewer.append(p.$largeImg),"standard"==p.options.type){var e=a/this.width;p.$handlerArea=m('<div class="zm-handlerarea" style="width:'+p.$viewer.width()*e+"px;height:"+p.$viewer.height()*e+'px"></div>').appendTo(p.$handler),p.scale=e}-1==p.evt.x&&-1==p.evt.y?p.moveHandler(o.pageX,o.pageY):p.moveHandler(p.evt.x,p.evt.y),p.options.showDescription&&p.$el.attr("alt")&&""!=m.trim(p.$el.attr("alt"))&&p.$viewer.append('<div class="'+p.options.descriptionClass+'">'+p.$el.attr("alt")+"</div>")}},function(){},function(){}))},p.changeImage=function(e,o){this.$el.attr("src",e),this.isBigImageReady=-1,this.options.bigImageSrc="string"==typeof o?o:e,p.options.preload&&((new Image).src=this.options.bigImageSrc),this.$viewer.hide().empty(),this.$handler.hide().empty(),this.$handlerArea=null},p.changeZoomSize=function(e,o){p.options.zoomSize=[e,o]},p.destroy=function(){m(document).unbind("mousemove.imagezoom"+p.callIndex),this.$el.unbind(".imagezoom"),this.$viewer.remove(),this.$handler.remove(),this.$el.removeData("imagezoom")},p.smoothMove=function(e,o){var t=parseInt(p.$largeImg.css("top"));t=isNaN(t)?0:t;var i=parseInt(p.$largeImg.css("left"));if(i=isNaN(i)?0:i,o=parseInt(o),e=parseInt(e),t==o&&i==e)return f.clearTimeout(p.animateTimer),void(p.animateTimer=null);var s=o-t,a=e-i,n=t+s/Math.abs(s)*Math.ceil(Math.abs(s/10)),r=i+a/Math.abs(a)*Math.ceil(Math.abs(a/10));p.$viewer.find("img").css({top:n,left:r}),p.animateTimer=setTimeout(function(){p.smoothMove(e,o)},10)},p.init(o)},m.ImageZoom.defaults={bigImageSrc:"",preload:!0,type:"inner",smoothMove:!0,position:"right",offset:[10,0],alignTo:"",zoomSize:[100,100],descriptionClass:"zm-description",zoomViewerClass:"",zoomHandlerClass:"",showDescription:!0,onShow:function(e){},onHide:function(e){}},m.ImageZoom._calltimes=0,m.fn.ImageZoom=function(e){return this.each(function(){new m.ImageZoom(this,e)})}}(jQuery,window);var fastImg=function(){var m=[],d=null,g=function(){for(var e=0;e<m.length;e++)m[e].end?m.splice(e--,1):m[e]();!m.length&&o()},o=function(){clearInterval(d),d=null};return function(e,o,t,i){var s,a,n,r,l,h=new Image;if(h.src=e,h.complete)return o.call(h),void(t&&t.call(h));a=h.width,n=h.height,h.onerror=function(){i&&i.call(h),s.end=!0,h=h.onload=h.onerror=null},(s=function(){r=h.width,l=h.height,(r!==a||l!==n||1024<r*l)&&(o.call(h),s.end=!0)})(),h.onload=function(){!s.end&&s(),t&&t.call(h),h=h.onload=h.onerror=null},s.end||(m.push(s),null===d&&(d=setInterval(g,40)))}}();