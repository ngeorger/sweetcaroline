!function(e,t){"use strict";var i=t(window),n=(t(document),t("body"));if(null==a)var a=function(e,t){t=decodeURI(t),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))};var o=function(e){var i=e.target;""!==i.value?(""!==i.max&&(i.value=Math.min(Number(i.value),Number(i.max))),""!==i.min&&(i.value=Math.max(Number(i.value),Number(i.min))),t(i).trigger("change")):t(i).trigger("change")};t("#customize-controls").on("blur",'input[type="number"]',o),t("#customize-controls").on("keyup",'input[type="number"]',(function(e){13==e.which&&o(e)})),t("#customize-controls").on("focus",'input[type="number"]',(function(e){t(this).on("mousewheel.disableScroll",(function(e){e.preventDefault()}))})),t("#customize-controls").on("blur",'input[type="number"]',(function(e){t(this).off("mousewheel.disableScroll")})),wp.customize.sectionConstructor["cakecious-section-pro-teaser"]=wp.customize.sectionConstructor["cakecious-section-pro-link"]=wp.customize.sectionConstructor["cakecious-section-pro-locked"]=wp.customize.sectionConstructor["cakecious-section-spacer"]=wp.customize.Section.extend({attachEvents:function(){},isContextuallyActive:function(){return!0}}),wp.customize.CakeciousControl=wp.customize.Control.extend({initialize:function(e,t){var i=t||{};i.params=i.params||{},i.params.type||(i.params.type="cakecious-base"),i.params.content||(i.params.content=jQuery("<li></li>"),i.params.content.attr("id","customize-control-"+e.replace(/]/g,"").replace(/\[/g,"-")),i.params.content.attr("class","customize-control customize-control-"+i.params.type)),this.propertyElements=[],wp.customize.Control.prototype.initialize.call(this,e,i)},_setUpSettingRootLinks:function(){var e=this;e.container.find("[data-customize-setting-link]").each((function(){var t=jQuery(this);wp.customize(t.data("customizeSettingLink"),(function(i){var n=new wp.customize.Element(t);e.elements.push(n),n.sync(i),n.set(i())}))}))},_setUpSettingPropertyLinks:function(){var e=this;e.setting&&e.container.find("[data-customize-setting-property-link]").each((function(){var t,i=jQuery(this),n=i.data("customizeSettingPropertyLink");t=new wp.customize.Element(i),e.propertyElements.push(t),t.set(e.setting()[n]),t.bind((function(t){var i=e.setting();t!==i[n]&&((i=_.clone(i))[n]=t,e.setting.set(i))})),e.setting.bind((function(e){e[n]!==t.get()&&t.set(e[n])}))}))},ready:function(){this._setUpSettingRootLinks(),this._setUpSettingPropertyLinks(),wp.customize.Control.prototype.ready.call(this),this.deferred.embedded.done((function(){}))},embed:function(){var e=this,t=e.section();t&&wp.customize.section(t,(function(t){t.expanded()||wp.customize.settings.autofocus.control===e.id?e.actuallyEmbed():t.expanded.bind((function(t){t&&e.actuallyEmbed()}))}))},actuallyEmbed:function(){"resolved"!==this.deferred.embedded.state()&&(this.renderContent(),this.deferred.embedded.resolve(),this.container.trigger("init"))},focus:function(e){this.actuallyEmbed(),wp.customize.Control.prototype.focus.call(this,e)}}),wp.customize.controlConstructor["cakecious-base"]=wp.customize.CakeciousControl,wp.customize.controlConstructor["cakecious-color"]=wp.customize.CakeciousControl.extend({ready:function(){var e=this,t=e.container.find(".color-picker");t.alphaColorPicker({change:function(){e.setting.set(t.wpColorPicker("color"))},clear:function(){e.setting.set("")}})}}),wp.customize.controlConstructor["cakecious-shadow"]=wp.customize.CakeciousControl.extend({ready:function(){_.bindAll(this,"updateValue"),this.container.find(".cakecious-shadow-color .color-picker").alphaColorPicker({change:this.updateValue,clear:this.updateValue}),this.container.on("change blur",".cakecious-shadow-input",this.updateValue)},updateValue:function(e){var i=this.container.find("input.cakecious-shadow-input").map((function(e,i){var n=t(i);return n.hasClass("color-picker")?""===n.wpColorPicker("color")?"rgba(0,0,0,0)":n.wpColorPicker("color"):n.is("input")?""===n.val()?"0":n.val().toString()+"px":n.val()})).get();i.push(this.container.find("select.cakecious-shadow-input").val()),this.setting(i.join(" "))}}),wp.customize.controlConstructor["cakecious-dimension"]=wp.customize.CakeciousControl.extend({ready:function(){_.bindAll(this,"onChangeUnit","onChangeNumber"),this.container.on("change",".cakecious-dimension-unit",this.onChangeUnit),this.container.on("change blur",".cakecious-dimension-input",this.onChangeNumber)},onChangeUnit:function(e){var i=t(e.target),n=t(e.target).closest(".cakecious-dimension-fieldset"),a=n.find(".cakecious-dimension-input");a.attr("min",this.params.units[i.val()].min),a.attr("max",this.params.units[i.val()].max),a.attr("step",this.params.units[i.val()].step),this.settings[n.attr("data-settingkey")].set("")},onChangeNumber:function(e){var i=t(e.target),n=t(e.target).closest(".cakecious-dimension-fieldset"),a=n.find(".cakecious-dimension-unit");this.settings[n.attr("data-settingkey")].set(""===i.val()?"":i.val().toString()+a.val().toString())}}),wp.customize.controlConstructor["cakecious-slider"]=wp.customize.CakeciousControl.extend({ready:function(){_.bindAll(this,"onChangeUnit","onChangeNumber","onChangeSlider"),this.container.on("change",".cakecious-slider-unit",this.onChangeUnit),this.container.on("change blur",".cakecious-slider-input",this.onChangeNumber),this.container.on("input",".cakecious-slider-range",this.onChangeSlider)},onChangeUnit:function(e){var i=t(e.target),n=t(e.target).closest(".cakecious-slider-fieldset"),a=n.find(".cakecious-slider-input"),o=n.find(".cakecious-slider-range"),c=n.find(".cakecious-slider-value");a.attr("min",this.params.units[i.val()].min),a.attr("max",this.params.units[i.val()].max),a.attr("step",this.params.units[i.val()].step),o.attr("min",this.params.units[i.val()].min),o.attr("max",this.params.units[i.val()].max),o.attr("step",this.params.units[i.val()].step),c.val("").trigger("change")},onChangeNumber:function(e){var i=t(e.target),n=t(e.target).closest(".cakecious-slider-fieldset"),a=n.find(".cakecious-slider-unit"),o=n.find(".cakecious-slider-range"),c=n.find(".cakecious-slider-value");o.val(i.val());var s=""===i.val()?"":i.val().toString()+a.val().toString();c.val(s).trigger("change")},onChangeSlider:function(e){var i=t(e.target),n=t(e.target).closest(".cakecious-slider-fieldset"),a=n.find(".cakecious-slider-unit"),o=n.find(".cakecious-slider-input"),c=n.find(".cakecious-slider-value");o.val(i.val());var s=""===o.val()?"":o.val().toString()+a.val().toString();c.val(s).trigger("change")}}),wp.customize.controlConstructor["cakecious-dimensions"]=wp.customize.CakeciousControl.extend({ready:function(){this.container.find(".cakecious-dimensions-fieldset").each((function(e,i){var n=t(i),a=n.find(".cakecious-dimensions-unit"),o=n.find(".cakecious-dimensions-link"),c=n.find(".cakecious-dimensions-unlink"),s=n.find(".cakecious-dimensions-input"),r=n.find(".cakecious-dimensions-value");a.on("change",(function(e){var t=a.find('option[value="'+this.value+'"]');s.attr("min",t.attr("data-min")),s.attr("max",t.attr("data-max")),s.attr("step",t.attr("data-step")),s.val("").trigger("change")})),o.on("click",(function(e){e.preventDefault(),n.attr("data-linked","true"),s.val(s.first().val()).trigger("change"),s.first().focus()})),c.on("click",(function(e){e.preventDefault(),n.attr("data-linked","false"),s.first().focus()})),s.on("keyup mouseup",(function(e){"true"==n.attr("data-linked")&&s.not(this).val(this.value).trigger("change")})),s.on("change blur",(function(e){var t,i=[],n=a.val().toString(),o=!0;s.each((function(){""===this.value?i.push("0"+n):(i.push(this.value.toString()+n),o=!1)})),t=o?"   ":i.join(" "),r.val(t).trigger("change")}))}))}}),wp.customize.controlConstructor["cakecious-typography"]=wp.customize.CakeciousControl.extend({ready:function(){this.container.find(".cakecious-typography-size").each((function(e,i){var n=t(i),a=n.find(".cakecious-typography-size-unit"),o=n.find(".cakecious-typography-size-input"),c=n.find(".cakecious-typography-size-value"),s=function(e){var t=a.find('option[value="'+e+'"]');o.attr("min",t.attr("data-min")),o.attr("max",t.attr("data-max")),o.attr("step",t.attr("data-step"))};a.on("change",(function(e){s(this.value),o.val("").trigger("change")})),s(a.val()),o.on("change blur",(function(e){var t=""===this.value?"":this.value.toString()+a.val().toString();c.val(t).trigger("change")}))}))}}),wp.customize.controlConstructor["cakecious-background"]=wp.customize.CakeciousControl.extend({ready:function(){_.bindAll(this,"openMediaLibrary","removeImage","onOpenMediaLibrary","onSelectMediaLibrary"),this.container.on("click keydown",".upload-button",this.openMediaLibrary),this.container.on("click keydown",".thumbnail-image img",this.openMediaLibrary),this.container.on("click keydown",".remove-button",this.removeImage)},openMediaLibrary:function(e){wp.customize.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),this.mediaLibrary||this.initMediaLibrary(),this.mediaLibrary.open())},initMediaLibrary:function(){this.mediaLibrary=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:"image"}),multiple:!1,date:!1})]}),this.mediaLibrary.on("select",this.onSelectMediaLibrary),this.mediaLibrary.on("open",this.onOpenMediaLibrary)},onOpenMediaLibrary:function(e){if(this.params.attachment){var t=wp.media.attachment(this.params.attachment.id);t.fetch(),this.mediaLibrary.state().get("selection").add([t])}},onSelectMediaLibrary:function(e){var t=this.mediaLibrary.state().get("selection").first().toJSON();this.params.attachment=t,this.settings.image.set(t.url),this.renderContent()},removeImage:function(e){wp.customize.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),this.params.attachment={},this.settings.image.set(""),this.renderContent())}}),wp.customize.controlConstructor["cakecious-multicheck"]=wp.customize.CakeciousControl.extend({ready:function(){var e=this,t=e.container.find(".cakecious-multicheck-input");t.on("change",(function(i){var n=[];t.each((function(){this.checked&&n.push(this.value)})),e.setting.set(n)}))}}),wp.customize.controlConstructor["cakecious-radioimage"]=wp.customize.CakeciousControl.extend({ready:function(){var e=this;e.container.find(".cakecious-radioimage-input").on("change",(function(t){e.setting.set(this.value)}))}}),wp.customize.controlConstructor["cakecious-sortable"]=wp.customize.CakeciousControl.extend({ready:function(){var e=this,t=e.container[0].querySelector(".cakecious-sortable"),i=e.container[0].querySelectorAll('input[type="checkbox"]');_.bindAll(e,"updateValue"),e.sortable=t,sortable("#"+t.id,{handle:".cakecious-sortable-item-handle",forcePlaceholderSize:!0,itemSerializer:function(e,t){return{checked:e.node.querySelector("input").checked,value:e.node.dataset.value}}}),t.addEventListener("sortupdate",e.updateValue,!1),i.forEach((function(t){t.addEventListener("change",e.updateValue,!1)}))},updateValue:function(e){for(var t=sortable("#"+this.sortable.id,"serialize")[0].items.filter((function(e){return e.checked})),i=[],n=0;n<t.length;n++)i.push(t[n].value);this.setting.set(i)}}),wp.customize.controlConstructor["cakecious-builder"]=wp.customize.CakeciousControl.extend({ready:function(){var e=this;e.builder=e.container.find(".cakecious-builder"),e.builderLocations=e.builder.find(".cakecious-builder-location"),e.builderInactive=e.builder.find(".cakecious-builder-inactive"),e.updateValue=function(i){if("__inactive"!==i){var n=e.builderLocations.filter('[data-location="'+i+'"]').find(".cakecious-builder-element"),a=[];n.each((function(){a.push(t(this).attr("data-value"))})),null!==e.settings?e.settings[i].set(a):e.setting.set(a)}},e.showHideAddButton=function(){var t=e.builder.find(".cakecious-builder-element-add");0===e.builderInactive.find(".cakecious-builder-element").length?t.hide():t.show()},e.showHideAddButton(),e.container.on("keyup","[tabindex]",(function(e){13!=e.which&&32!=e.which||t(this).trigger("click")})),e.container.on("click",".cakecious-builder-element-add",(function(i){i.preventDefault();var n=t(this),a=n.closest(".cakecious-builder-location"),o=n.closest(".cakecious-builder-locations");e.builderInactive.prev().get(0)==a.get(0)&&e.builderInactive.hasClass("show")?e.builderInactive.removeClass("show").appendTo(o):e.builderInactive.addClass("show").insertAfter(a)})),e.container.on("click",".cakecious-builder-inactive .cakecious-builder-element",(function(i){if(i.preventDefault(),e.builderInactive.hasClass("show")){var n=t(this),a=e.builderInactive.prev(".cakecious-builder-location");n.appendTo(a.children(".cakecious-builder-sortable-panel")),e.builderInactive.removeClass("show"),e.updateValue(a.attr("data-location")),e.showHideAddButton()}})),e.container.on("click",".cakecious-builder-element-delete",(function(i){i.preventDefault();var n=t(this).parent(".cakecious-builder-element"),a=n.closest(".cakecious-builder-location");n.prependTo(e.builderInactive.children(".cakecious-builder-sortable-panel")),e.updateValue(a.attr("data-location")),e.showHideAddButton()})),e.container.find(".cakecious-builder-sortable-panel").sortable({items:".cakecious-builder-element:not(.cakecious-builder-element-disabled)",connectWith:'.cakecious-builder-sortable-panel[data-connect="'+e.builder.attr("data-name")+'"]',containment:e.container,update:function(i,n){e.updateValue(t(i.target).parent().attr("data-location")),e.showHideAddButton()},receive:function(e,i){0<=t(i.item).attr("data-limitations").split(",").indexOf(t(this).parent().attr("data-location"))&&t(i.sender).sortable("cancel")},start:function(i,n){for(var a=t(n.item).attr("data-limitations").split(","),o=0;o<a.length;++o){var c=e.builderLocations.filter('[data-location="'+a[o]+'"]');void 0!==c&&c.addClass("disabled")}},stop:function(t,i){e.builderLocations.removeClass("disabled"),e.builderInactive.removeClass("disabled")}}).disableSelection()}}),wp.customize.bind("ready",(function(){t("#customize-controls").on("click",".cakecious-responsive-switcher-button",(function(e){e.preventDefault(),wp.customize.previewedDevice.set(t(this).attr("data-device"))}));var e=function(){var e=wp.customize.previewedDevice.get(),i=t("span.cakecious-responsive-switcher-button"),n=t(".cakecious-responsive-switcher-button.nav-tab");t(".cakecious-responsive-fieldset").removeClass("active").filter(".preview-"+e).addClass("active"),i.removeClass("active").filter(".preview-"+e).addClass("active"),n.removeClass("nav-tab-active").filter(".preview-"+e).addClass("nav-tab-active")};wp.customize.previewedDevice.bind(e),wp.customize.section.each((function(t){t.expanded.bind(e)})),t("#customize-controls").on("click",".cakecious-customize-set-preview-url",(function(e){e.preventDefault();var i=t(this).attr("href"),n=a("url",i);n!==wp.customize.previewer.previewUrl()&&wp.customize.previewer.previewUrl(n)})),t("#customize-controls").on("click",".cakecious-customize-goto-control",(function(e){e.preventDefault();var i=t(this).attr("href"),n=a("autofocus[control]",i),o=a("autofocus[section]",i),c=a("autofocus[panel]",i);n?wp.customize.control(n).focus():o?wp.customize.section(o).focus():c&&wp.customize.panel(c).focus()})),cakeciousCustomizerControlsData&&cakeciousCustomizerControlsData.contexts&&_.each(cakeciousCustomizerControlsData.contexts,(function(e,t){var i=0==t.indexOf("cakecious_section")?"section":"control";wp.customize[i](t,(function(t){_.each(e,(function(e,n){var a="__device"===e.setting?wp.customize.previewedDevice:wp.customize(e.setting),o=function(n){var a=!1;switch(null!=e.operator&&"="!=e.operator||(e.operator="=="),e.operator){case">":a=n>e.value;break;case"<":a=n<e.value;break;case">=":a=n>=e.value;break;case"<=":a=n<=e.value;break;case"in":a=0<=e.value.indexOf(n);break;case"not_in":a=0>e.value.indexOf(n);break;case"contain":a=0<=n.indexOf(e.value);break;case"not_contain":a=0>n.indexOf(e.value);break;case"!=":a=n!=e.value;break;case"empty":a=0==n.length;break;case"!empty":a=0<n.length;break;default:a=n==e.value}var o=t.container;"section"===i&&(o=t.headContainer),a?(o.show(),o.removeClass("cakecious-context-hidden")):(o.hide(),o.addClass("cakecious-context-hidden"),"section"===i&&t.expanded()&&t.collapse())};void 0!==a&&("__device"!==e.setting&&o(a.get()),a.bind(o))}))}))}));var o=function(){var e=t(".control-section.cakecious-builder-active");1324<=window.innerWidth&&n.hasClass("cakecious-has-builder-active")&&0<e.length&&!e.hasClass("cakecious-hide")?wp.customize.previewer.container.css({bottom:e.outerHeight()+"px"}):wp.customize.previewer.container.css({bottom:""})};i.on("resize",o),wp.customize.previewedDevice.bind((function(e){setTimeout((function(){o()}),250)}));var c;c="",_.each(cakeciousCustomizerControlsData.previewContexts,(function(e,t){wp.customize.section(t,(function(t){t.expanded.bind((function(t){t?(c=wp.customize.previewer.previewUrl.get(),wp.customize.previewer.previewUrl.set(e)):wp.customize.previewer.previewUrl.set(c)}))}))}));var s=function(e){var a="cakecious_panel_header"===e.id?wp.customize.section("cakecious_section_header_builder"):wp.customize.section("cakecious_section_footer_builder"),c=a.contentContainer;e.expanded.bind((function(e){_.each(a.controls(),(function(e){"resolved"!==e.deferred.embedded.state()&&(e.renderContent(),e.deferred.embedded.resolve(),e.container.trigger("init"))})),e?(n.addClass("cakecious-has-builder-active"),c.addClass("cakecious-builder-active")):(n.removeClass("cakecious-has-builder-active"),c.removeClass("cakecious-builder-active")),o()})),c.on("click",".cakecious-builder-toggle",(function(e){e.preventDefault(),c.toggleClass("cakecious-hide"),o()})),c.find(".cakecious-builder-sortable-panel").on("sortover",(function(e,t){o()}));var s=function(){1324<=window.innerWidth?(c.insertAfter(t(".wp-full-overlay-sidebar-content")),a.expanded()&&a.collapse()):c.appendTo(t("#customize-theme-controls"))};wp.customize.bind("pane-contents-reflowed",s),i.on("resize",s)};wp.customize.panel("cakecious_panel_header",s),wp.customize.panel("cakecious_panel_footer",s),wp.customize.control("footer_elements").container.on("init",e);var r=function(e){var i=t(this),n=i.find(".customize-control-content").attr("data-name");if(cakeciousCustomizerControlsData.headerFooterBuilderStructures[n]){var a=0<=i.attr("id").indexOf("header")?"header":"footer",o=i.find(".cakecious-builder-locations").addClass("cakecious-builder-groups");_.each(cakeciousCustomizerControlsData.headerFooterBuilderStructures[n],(function(e,n){var a="vertical"===n?"cakecious-builder-group cakecious-builder-group-vertical cakecious-builder-layout-block":"cakecious-builder-group cakecious-builder-group-horizontal cakecious-builder-layout-inline",c=t(document.createElement("div")).addClass(a);_.each(e,(function(e,n){var a=t(document.createElement("div")).addClass("cakecious-builder-area").attr("data-key",n),o=t(document.createElement("span")).addClass("cakecious-builder-area-label").html(e.label),s=t(document.createElement("div")).addClass("cakecious-builder-area-locations");_.each(e.locations,(function(e){var t=i.find('[data-location="'+e+'"]');t&&t.appendTo(s)})),0<s.children().length&&(a.appendTo(c),o.appendTo(a),s.appendTo(a))})),0<c.children().length&&c.appendTo(o)})),i.on("click",".cakecious-builder-location .cakecious-builder-element > span",(function(e){e.preventDefault();var i=t(this).parent(".cakecious-builder-element"),n="heading_"+a+"_"+i.attr("data-value").replace("-","_"),o=wp.customize.control(n);o&&o.focus()})),i.on("click",".cakecious-builder-area-label",(function(e){e.preventDefault();var i="cakecious_section_"+a+"_"+t(this).parent().attr("data-key").replace("-","_"),n=wp.customize.section(i);n&&n.focus()}))}};wp.customize.control("header_elements").container.on("init",r),wp.customize.control("header_mobile_elements").container.on("init",r),wp.customize.control("footer_elements").container.on("init",r)}))}(wp,jQuery);